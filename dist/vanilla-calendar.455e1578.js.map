{"version":3,"sources":["src/js/vanilla-calendar.js"],"names":["VanillaCalendar","options","addEvent","el","type","handler","attachEvent","addEventListener","removeEvent","detachEvent","removeEventListener","opts","selector","datesFilter","pastDates","availableWeekDays","availableDates","date","Date","todaysDate","button_prev","button_next","month","month_label","onSelect","data","elem","months","shortWeekday","k","hasOwnProperty","element","document","querySelector","getWeekDay","createDay","newDayElem","createElement","dateElem","innerHTML","getDate","className","setAttribute","getDay","d","available_week_day","filter","f","day","available_date","getFullYear","String","getMonth","padStart","style","marginLeft","getTime","classList","add","length","JSON","stringify","toString","appendChild","selectDate","querySelectorAll","forEach","s","remove","datas","dataset","calendarDate","calendarData","parse","createMonth","clearCalendar","currentMonth","setDate","setMonth","monthPrev","monthNext","init","destroy","reset","set","window"],"mappings":"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","file":"vanilla-calendar.455e1578.js","sourceRoot":"..","sourcesContent":["let VanillaCalendar = (function () {\r\n  function VanillaCalendar(options) {\r\n    function addEvent(el, type, handler) {\r\n      if (!el) return;\r\n      if (el.attachEvent) el.attachEvent(\"on\" + type, handler);\r\n      else el.addEventListener(type, handler);\r\n    }\r\n    function removeEvent(el, type, handler) {\r\n      if (!el) return;\r\n      if (el.detachEvent) el.detachEvent(\"on\" + type, handler);\r\n      else el.removeEventListener(type, handler);\r\n    }\r\n    let opts = {\r\n      selector: null,\r\n      datesFilter: false,\r\n      pastDates: true,\r\n      availableWeekDays: [],\r\n      availableDates: [],\r\n      date: new Date(),\r\n      todaysDate: new Date(),\r\n      button_prev: null,\r\n      button_next: null,\r\n      month: null,\r\n      month_label: null,\r\n      onSelect: (data, elem) => {},\r\n      months: [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\",\r\n      ],\r\n      shortWeekday: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n    };\r\n    for (let k in options) if (opts.hasOwnProperty(k)) opts[k] = options[k];\r\n\r\n    let element = document.querySelector(opts.selector);\r\n    if (!element) return;\r\n\r\n    const getWeekDay = function (day) {\r\n      return [\r\n        \"monday\",\r\n        \"tuesday\",\r\n        \"wednesday\",\r\n        \"thursday\",\r\n        \"friday\",\r\n        \"saturday\",\r\n        \"sunday\",\r\n      ][day];\r\n    };\r\n\r\n    const createDay = function (date) {\r\n      let newDayElem = document.createElement(\"div\");\r\n      let dateElem = document.createElement(\"span\");\r\n      dateElem.innerHTML = date.getDate();\r\n      newDayElem.className = \"vanilla-calendar-date\";\r\n      newDayElem.setAttribute(\"data-calendar-date\", date);\r\n\r\n      const getDay = function (date) {\r\n        let d = date.getDay() - 1;\r\n        if (d === -1) d = 6;\r\n        return d;\r\n      };\r\n\r\n      let available_week_day = opts.availableWeekDays.filter(\r\n        (f) => f.day === getDay(date) || f.day === getWeekDay(getDay(date))\r\n      );\r\n      let available_date = opts.availableDates.filter(\r\n        (f) =>\r\n          f.date ===\r\n          date.getFullYear() +\r\n            \"-\" +\r\n            String(date.getMonth() + 1).padStart(\"2\", 0) +\r\n            \"-\" +\r\n            String(date.getDate()).padStart(\"2\", 0)\r\n      );\r\n\r\n      if (date.getDate() === 1) {\r\n        newDayElem.style.marginLeft = getDay(date) * 14.28 + \"%\";\r\n      }\r\n      if (\r\n        opts.date.getTime() <= opts.todaysDate.getTime() - 1 &&\r\n        !opts.pastDates\r\n      ) {\r\n        newDayElem.classList.add(\"vanilla-calendar-date--disabled\");\r\n      } else {\r\n        if (opts.datesFilter) {\r\n          if (available_week_day.length) {\r\n            newDayElem.classList.add(\"vanilla-calendar-date--active\");\r\n            newDayElem.setAttribute(\r\n              \"data-calendar-data\",\r\n              JSON.stringify(available_week_day[0])\r\n            );\r\n            newDayElem.setAttribute(\"data-calendar-status\", \"active\");\r\n          } else if (available_date.length) {\r\n            newDayElem.classList.add(\"vanilla-calendar-date--active\");\r\n            newDayElem.setAttribute(\r\n              \"data-calendar-data\",\r\n              JSON.stringify(available_date[0])\r\n            );\r\n            newDayElem.setAttribute(\"data-calendar-status\", \"active\");\r\n          } else {\r\n            newDayElem.classList.add(\"vanilla-calendar-date--disabled\");\r\n          }\r\n        } else {\r\n          newDayElem.classList.add(\"vanilla-calendar-date--active\");\r\n          newDayElem.setAttribute(\"data-calendar-status\", \"active\");\r\n        }\r\n      }\r\n      if (date.toString() === opts.todaysDate.toString()) {\r\n        newDayElem.classList.add(\"vanilla-calendar-date--today\");\r\n      }\r\n\r\n      newDayElem.appendChild(dateElem);\r\n      opts.month.appendChild(newDayElem);\r\n    };\r\n\r\n    const removeActiveClass = function () {\r\n      document\r\n        .querySelectorAll(\".vanilla-calendar-date--selected\")\r\n        .forEach((s) => {\r\n          s.classList.remove(\"vanilla-calendar-date--selected\");\r\n        });\r\n    };\r\n\r\n    const selectDate = function () {\r\n      let activeDates = element.querySelectorAll(\r\n        \"[data-calendar-status=active]\"\r\n      );\r\n      activeDates.forEach((date) => {\r\n        date.addEventListener(\"click\", function () {\r\n          removeActiveClass();\r\n          let datas = this.dataset;\r\n          let data = {};\r\n          if (datas.calendarDate) data.date = datas.calendarDate;\r\n          if (datas.calendarData) data.data = JSON.parse(datas.calendarData);\r\n          opts.onSelect(data, this);\r\n          this.classList.add(\"vanilla-calendar-date--selected\");\r\n        });\r\n      });\r\n    };\r\n\r\n    const createMonth = function () {\r\n      clearCalendar();\r\n      let currentMonth = opts.date.getMonth();\r\n      while (opts.date.getMonth() === currentMonth) {\r\n        createDay(opts.date);\r\n        opts.date.setDate(opts.date.getDate() + 1);\r\n      }\r\n\r\n      opts.date.setDate(1);\r\n      opts.date.setMonth(opts.date.getMonth() - 1);\r\n      opts.month_label.innerHTML =\r\n        opts.months[opts.date.getMonth()] + \" \" + opts.date.getFullYear();\r\n      selectDate();\r\n    };\r\n\r\n    const monthPrev = function () {\r\n      opts.date.setMonth(opts.date.getMonth() - 1);\r\n      createMonth();\r\n    };\r\n\r\n    const monthNext = function () {\r\n      opts.date.setMonth(opts.date.getMonth() + 1);\r\n      createMonth();\r\n    };\r\n\r\n    const clearCalendar = function () {\r\n      opts.month.innerHTML = \"\";\r\n    };\r\n\r\n    const createCalendar = function () {\r\n      document.querySelector(opts.selector).innerHTML = `\r\n            <div class=\"vanilla-calendar-header\">\r\n                <button type=\"button\" class=\"vanilla-calendar-btn\" data-calendar-toggle=\"previous\"><svg height=\"24\" version=\"1.1\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\"></path></svg></button>\r\n                <div class=\"vanilla-calendar-header__label\" data-calendar-label=\"month\"></div>\r\n                <button type=\"button\" class=\"vanilla-calendar-btn\" data-calendar-toggle=\"next\"><svg height=\"24\" version=\"1.1\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z\"></path></svg></button>\r\n            </div>\r\n            <div class=\"vanilla-calendar-week\"></div>\r\n            <div class=\"vanilla-calendar-body\" data-calendar-area=\"month\"></div>\r\n            `;\r\n    };\r\n    const setWeekDayHeader = function () {\r\n      document.querySelector(\r\n        `${opts.selector} .vanilla-calendar-week`\r\n      ).innerHTML = `\r\n                <span>${opts.shortWeekday[0]}</span>\r\n                <span>${opts.shortWeekday[1]}</span>\r\n                <span>${opts.shortWeekday[2]}</span>\r\n                <span>${opts.shortWeekday[3]}</span>\r\n                <span>${opts.shortWeekday[4]}</span>\r\n                <span>${opts.shortWeekday[5]}</span>\r\n                <span>${opts.shortWeekday[6]}</span>\r\n            `;\r\n    };\r\n\r\n    this.init = function () {\r\n      createCalendar();\r\n      opts.button_prev = document.querySelector(\r\n        opts.selector + \" [data-calendar-toggle=previous]\"\r\n      );\r\n      opts.button_next = document.querySelector(\r\n        opts.selector + \" [data-calendar-toggle=next]\"\r\n      );\r\n      opts.month = document.querySelector(\r\n        opts.selector + \" [data-calendar-area=month]\"\r\n      );\r\n      opts.month_label = document.querySelector(\r\n        opts.selector + \" [data-calendar-label=month]\"\r\n      );\r\n\r\n      opts.date.setDate(1);\r\n      createMonth();\r\n      setWeekDayHeader();\r\n      addEvent(opts.button_prev, \"click\", monthPrev);\r\n      addEvent(opts.button_next, \"click\", monthNext);\r\n    };\r\n\r\n    this.destroy = function () {\r\n      removeEvent(opts.button_prev, \"click\", monthPrev);\r\n      removeEvent(opts.button_next, \"click\", monthNext);\r\n      clearCalendar();\r\n      document.querySelector(opts.selector).innerHTML = \"\";\r\n    };\r\n\r\n    this.reset = function () {\r\n      this.destroy();\r\n      this.init();\r\n    };\r\n\r\n    this.set = function (options) {\r\n      for (let k in options) if (opts.hasOwnProperty(k)) opts[k] = options[k];\r\n      createMonth();\r\n      //this.reset()\r\n    };\r\n\r\n    this.init();\r\n  }\r\n  return VanillaCalendar;\r\n})();\r\n\r\nwindow.VanillaCalendar = VanillaCalendar;\r\n"]}